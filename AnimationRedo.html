<!doctype html>
<html lang='en'>
<head>
	<title>Balloon Fun</title>
<style>
canvas {
	border: 0px solid black;
}	
</style>
<script>
/*TO DO
Add background music
Add mouse click interaction
Add animation to balloons
Add animation to pump
Add animation to text--title screen with button to start?
Make better color gradients for balloons
*/

var canvas;
var context;
var textTimer;
var timer;
var timerTwo;
var shapes = [];
var balloonShapes = ['regular', 'star', 'long', 'heart', 'mickey'];

function init() {
        canvas = document.getElementById('canvas');
        context = canvas.getContext('2d');
 	//making a responsive canvas
        window.addEventListener('resize', resizeCanvas, false);
        window.addEventListener('orientationchange', resizeCanvas, false);
        resizeCanvas();
		canvas.onclick = function(event) {
			handleClick(event.clientX, event.clientY);
		};
		timer = setInterval(resizeCanvas, 20);
		timerTwo = setInterval(newShape, 500);
      }

//change the colors here later to gradients
function newShape() {
	var x = Math.random() * canvas.width;
	var y = Math.random() * canvas.height;
	var colors = ['red', 'green', 'blue', 'orange', 'purple', 'yellow'];
	var color = colors[Math.floor(Math.random()*colors.length)];
	shapes.push(new Shape(x, y, color));	
	}

function Shape(x, y, color) {
		this.x = x;
		this.y = y;
		this.size = Math.random()*20+5;
		this.dx = Math.random()*4-2;
		this.dy = Math.random()*4-2;
		this.color = color;
		this.shape = balloonShapes[Math.floor(Math.random()*balloonShapes.length)];
	  }

//add two separate functions like the two above to handle the pump animation and shape

function degreesToRadians(degrees) {
    return (degrees * Math.PI)/180;
}

//not animated
function drawBackground() {
    var bgColor = '#dfbf9f';
    //sets fill style
    context.fillStyle = bgColor;
    context.fillRect(0,0,canvas.width,canvas.height);
}

//work on this part after adding separate animation functions
//needs relative drawing
function drawPump() {
	var pumpFill = context.createLinearGradient(canvas.width-100,canvas.height-50,canvas.width-120,canvas.height-150);
    pumpFill.addColorStop(1, "#cccccc");
    pumpFill.addColorStop(0, "#666666");
    //non-animated part
    //x = 400, y = 430 in original
    //canvas width = 500, canvas height = 450
    context.beginPath();
    context.moveTo(canvas.width-100, canvas.height-20);
    context.lineTo(canvas.width-100, canvas.height-150);
    context.lineTo(canvas.width-120, canvas.height-150);
    context.lineTo(canvas.width-120, canvas.height-20);
    context.quadraticCurveTo(canvas.width-110, canvas.height-14, canvas.width-100, canvas.height-20);
    context.strokeStyle="4d4d4d";
    context.fillStyle=pumpFill;
    context.lineWidth=2;
    context.stroke();
    context.fill();
    //drawing the handle, animated later
    context.beginPath();
    context.moveTo(canvas.width-100, canvas.height-155);
    context.lineTo(canvas.width-70, canvas.height-155);
    context.lineTo(canvas.width-70, canvas.height-165);
    context.lineTo(canvas.width-150, canvas.height-165);
    context.lineTo(canvas.width-150, canvas.height-155);
    context.lineTo(canvas.width-100, canvas.height-155);
    context.strokeStyle="4d4d4d";
    context.fillStyle=pumpFill;
    context.stroke();
    context.fill();
    //drawing the inner part of base, animated later
    context.beginPath();
    context.moveTo(canvas.width-105, canvas.height-155);
    context.lineTo(canvas.width-105, canvas.height-150);
    context.lineTo(canvas.width-115, canvas.height-150);
    context.lineTo(canvas.width-115, canvas.height-155);
    context.lineTo(canvas.width-105, canvas.height-155);
    context.fillStyle="#4d4d4d";
    context.fill();
}

function drawCord(){
    context.globalCompositeOperation='source-over';
    context.beginPath();
    //x = 380, y = 430 in original
    //canvas width = 500, canvas height = 450
    context.moveTo(canvas.width-120, canvas.height-20);
    context.bezierCurveTo(canvas.width-260, canvas.height-70, canvas.width-392, canvas.height+20, canvas.width-400, canvas.height-20);
    context.lineWidth=5;
    context.strokeStyle= 'black';
    context.stroke();
}

function drawGround(){
        context.globalCompositeOperation='source-over';
        context.beginPath();
        context.moveTo(canvas.width, canvas.height);
        context.lineTo(canvas.width, canvas.height-50);
        context.lineTo(0, canvas.height-50);
        context.lineTo(0, canvas.height);
        context.lineTo(canvas.width, canvas.height);
        context.fillStyle="#00664c";
        context.fill();
        /*lines for walls--fix later
        context.fillStyle='#d2a679';
        context.beginPath();
        context.moveTo(450, 400);
        context.lineTo(450, 0);
        context.lineTo(500, 0);
        context.lineTo(500, 450);
        context.lineTo(450, 400);
        context.fill();
        //second wall
        context.beginPath();
        context.moveTo(50, 400);
        context.lineTo(50, 0);
        context.lineTo(0, 0);
        context.lineTo(0, 450);
        context.lineTo(50, 400);
        context.fill(); */
    }

//animated regular balloon shape
function drawRegular(regular){
    context.beginPath();
    context.lineJoin = 'miter';
    //x= 100, y = 422 in original
    //canvas width = 500, canvas height = 450
    //regular.x = canvas.width-400;
    //regular.y = canvas.height-28;
    context.moveTo(regular.x, regular.y);
    context.bezierCurveTo(regular.x-100, regular.y-222, regular.x+200, regular.y-122, regular.x, regular.y);
    //drawing the tie of the balloon
    context.moveTo(regular.x, regular.y);
    context.lineTo(regular.x+4, regular.y+8);
    context.lineTo(regular.x-4, regular.y+8);
    context.lineTo(regular.x, regular.y);
    context.fillStyle=regular.color;
    context.fill();
    /*drawing the highlight
    //change later to white translucent -- rgba(?,?,?, 0.2)
    //context.fillStyle='white';
    context.moveTo(regular.x+10, regular.y-72);
    context.lineTo(regular.x+10, regular.y-64);
    context.lineTo(regular.x+14, regular.y-68);
    context.lineTo(regular.x+14, regular.y-72);
    context.lineTo(regular.x+10, regular.y=72);
    context.fill(); */
}


function resizeCanvas() {
        canvas.width = window.innerWidth-20;
        canvas.height = window.innerHeight-20;
        //redraw all static elements
		drawBackground();
        drawGround();
        drawCord();
        drawPump();
		for (var i=0; i<shapes.length; i++) {
			if (shapes[i].shape == 'regular') {
				drawRegular(shapes[i]);

			} /*else if (shapes[i].shape == 'circle') {
				drawCircle(shapes[i]);
			} else if (shapes[i].shape == 'triangle') {
				drawTriangle(shapes[i]);
			} else if (shapes[i].shape == 'drop') {
				drawDrop(shapes[i]);
			} else if (shapes[i].shape == 'cloud') {
				drawCloud(shapes[i]);
			} */
			//if (shapes[i].x + shapes[i].dx > canvas.width || shapes[i].x + shapes[i].dx > 0)
				//shapes[i].dx = -shapes[i].dx;
			if (shapes[i].y + shapes[i].dy > canvas.height || shapes[i].y + shapes[i].dy > 0)
				//shapes[i].dy = -shapes[i].dy;
				shapes[i].x += shapes[i].dx;
				shapes[i].y += shapes[i].dy;
		}
		//drawText();		 
      }

window.onload = init;
</script>
</head>
<body>
	<canvas id='canvas' width='500' height='450'></canvas>
</body>
</html>